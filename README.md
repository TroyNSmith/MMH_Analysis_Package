# MMH Analysis Package
A package of Python scripts intended to analyze simulations generated by the MMH research group.

Note that new functionalities are being implemented to provide resources for students to learn MD analysis in Python and facilitate easier access to the workings of employed codes, however **original functionalities** should still work as intended. Newer scripts stored under `src` are currently in development.

In the **future**, this package will include Jupyter notebooks to facilitate user interaction with Python scripts as well as ported code from `mdevaluate` due to its limited documentation and steep learning curve.

## Getting Started with Pixi
This project uses [Pixi](https://pixi.sh/latest/) for environment and dependency management. Pixi is a fast, reproducible tool similar to conda, but with better performance, built-in support for scripting and multi-platform environments, and full compatibility with [VS Code](https://code.visualstudio.com/). 

### 1. Prerequisites
Make sure the following tools are installed:
#### Git
| Platform | Install Command or Link                                 |
| -------- | ------------------------------------------------------- |
| Windows  | Run through [WSL](https://learn.microsoft.com/en-us/windows/wsl/install) & follow Linux |
| MacOS    | Pre-installed or run `brew install git` (with Homebrew) |
| Linux    | Run `sudo apt install git` (Debian/Ubuntu)              |

Verify installation:
```
git --version
```

#### Pixi (Optional)
| Platform | Install Command or Link                                 |
| -------- | ------------------------------------------------------- |
| Windows  | Run through [WSL](https://learn.microsoft.com/en-us/windows/wsl/install) & follow Linux |
| Linux    | Run `curl -sSf https://prefix.dev/install.sh`           |

Verify installation:
```
pixi --version
```

Then restart your terminal (or follow the post-install instructions to update your `PATH`).

### 2. Clone This Repository
Follow the steps below to generate an SSH key and get access to this GitHub repository using SSH.
#### I. Generate an SSH Key (If You Don't Already Have One)
Open a terminal and run:
```
ssh-keygen -t ed25519 -C "your_email@example.com"
```
- Press **Enter** to accept the default file location
- Create a passphrase if you'd like, or press **Enter** to skip

#### II. Add Your SSH Key to GitHub
&#9312; Copy your public SSH key to your clipboard:
```diff
cat ~/.ssh/id_ed25519.pub
- Select and copy the contents of the id_ed25519.pub file
- displayed in the terminal to your clipboard
```
- &#9313; In the upper-right corner of any page on GitHub, click your profile picture, then click &#9881; **Settings**.
- &#9314; In the "Access" section of the sidebar, click  &#128273; **SSH and GPG keys**.
- &#9315; Click **New SSH key** or **Add SSH key**.
- &#9316; In the "Title" field, add a descriptive label for the new key. For example, if you're using this for a personal laptop, you might call this key "Personal Laptop".
- &#9317; Select the type of key, either authentication or signing. For more information about commit signing, see [About commit signature verification](https://docs.github.com/en/authentication/managing-commit-signature-verification/about-commit-signature-verification).
- &#9318; In the "Key" field, paste your public key.
- &#9319; Click **Add SSH key**.
- &#9320; If prompted, confirm access to your account on GitHub.

For more information on SSH keys, visit [GitHub Docs](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account).

```
git clone https://github.com/TroyNSmith/MMH_Analysis_Package.git
cd MMH_Analysis_Package
```

### 3. Set Up the Environment (Optional)
Inside the project folder, **activate** the environment:
```
pixi shell
```
All dependencies and tools will be available automatically in this shell.

### 4. Run Jupyter Notebook for Interactive Docs (Optional)
Once inside the Pixi environment, run:
```
jupyter lab
```

### 5. Open in VS Code
From the terminal:
```
code .
```

In VS Code:
- Install the **Python** extension.
  *optional*
- Use `ctrl+\` to open the terminal and run `pixi shell`.
- Set the Python interpreter: `Ctrl+Shift+P` &#8594; `Python: Select Interpreter` &#8594; `Pixi env`.

### 6. Pull and Push Changes
[Git pulling](https://github.com/git-guides/git-pull) allows a user to sync their local branch with a source branch, providing the most recent version to the local machine. Alternatively, a user can provide updates to the source branch from their local branch by [Git pushing](https://github.com/git-guides/git-push). These features are intended to streamline collaboration and version control, ensuring that all contributors are working with the most up-to-date codebase while avoiding the need for manual file transfers. In practice, this means changes can be shared, reviewed, and deployed more efficiently&#8212;all from the command line.

#### Pull:
```
git pull origin main
```

#### Commit and Push:
```
git add .
git commit -m "Your message."
git push origin main
```

## To do for current paper:

- [ ] Update image formats for data graphs
- [ ] Regenerate ISF and susceptibility data with a global q value
- [ ] Update non-Gaussian analysis
- [ ] Develop a correlation function for radial bins

## Future plans:

- [ ] Create a custom coordinates object from mdtraj Trajectory
    - [ ] Implement @property decorations for data organization and access
    - [ ] Implement functionality for selection filtering
    - [ ] Implement functionality for converting atomic coordinates into residue center of mass coordinates
    - [ ] Implement functionality for unwrapping coordinates from periodic boundary conditions

- [ ] Port mdevaluate functionalities to eliminate dependency
    - [ ] Rework and port correlation functions from mdevaluate
    - [ ] Provide in-depth documentation
    - [ ] Optimize for parallelization

- [ ] Reduce number of dependencies and encapsulate environment in Pixi .toml file

- [ ] Create Jupyter notebooks for testing & instructing
    - [ ] General documentation
    - [ ] Modules introducing students to Python and MD simulations
    - [ ] Performing analysis without having to run full scripts
    - [ ] Testing plot styles before implementing them

- [ ] Consolidate previous codes into the package, including bash scripts for simulating and analyzing data

- [ ] Functionality additions
    - [ ] Testing OpenMM for potential use with recent polarizable force fields including AMOEBA
    - [ ] Exploring new methods for greater depth of analysis in future projects
    - [ ] Implementing quantum mechanical calculations for structural analysis

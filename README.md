# MMH Analysis Package
A package of Python scripts intended to analyze simulations generated by the MMH research group.

## Pixi
This package uses [Pixi](https://pixi.sh/latest/) for environment and dependency management. Pixi is a fast, reproducible tool similar to conda, but is shipped with a software package and is fully compatible with [VS Code](https://code.visualstudio.com/). 

| Platform | Install Command or Link                                 |
| -------- | ------------------------------------------------------- |
| Windows  | Run through [WSL](https://learn.microsoft.com/en-us/windows/wsl/install) & follow Linux |
| Linux    | Run `curl -sSf https://prefix.dev/install.sh \| sh`           |

Verify installation:
```
pixi --version
```

Then restart your terminal (or follow the post-install instructions to update your `PATH`).

Inside the MMH Analysis Package folder, **activate** the environment:
```
pixi shell
```
All dependencies and tools will be available automatically in this shell.

*If you would rather use conda, necessary packages are listed under **dependencies** in `pixi.toml` and can be manually installed.*

*Note: A custom version of mdevaluate is hosted as a local module within this package.*

## How to use
Ensure that the pixi environment has been activated or all dependencies have been installed locally through an environment manager like mamba or conda.

For all of the scripts, ensure that your terminal is currently within the `src` directory:

```
cd src/
```

### pore.py

Within the `src` directory, call the main `Run` function in pore.py:

```
python -m pore Run --help
```

#### Options:
--- Input / Output --
* -i / --input (str) : Path/to/the/simulation/directory
- Path of the parent directory for topology (.tpr), trajectory (.xtc), and structure (.gro) files.
- ex: `-i /home/tnsmith/simulations/octanol/nvt_prod/`
* -tr / --trajectory: *input*/path/to/trajectory
 * Path to the trajectory file starting from the path specified by --input.
 *  ex: `-tr out/out.xtc`
* -tp / --topology: *input*/path/to/topology
 * Path to the topology file starting from the path specified by --input.
 *  ex: `-tr run.tpr`
* -st / --structure: *input*/path/to/structure
 * Path to the structure file starting from the path specified by --input.
 *  ex: `-st out/out.gro`
* -o / --output (str) : Path/to/the/output/directory (opt.)
 * Path of a directory to reroute output folders/files. (default = None)
 *  ex: `-o /home/tnsmith/simulations/octanol/nvt_prod/`
* res_name: str,
* atoms: list[str],
* num_segments: int,
* pore_diameter: float,
* q_val: float,
* override: bool,
* plot_only: bool
